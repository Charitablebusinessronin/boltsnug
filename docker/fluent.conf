# Snugs & Kisses Healthcare Platform - Log Configuration
# HIPAA-compliant logging for healthcare platform

<source>
  @type tail
  path /var/log/nginx/healthcare/*.log
  pos_file /var/log/fluentd-healthcare.log.pos
  tag healthcare.nginx.*
  format nginx
</source>

<filter healthcare.nginx.**>
  @type record_transformer
  <record>
    hostname "#{Socket.gethostname}"
    service "snugs-healthcare-portal"
    environment "#{ENV['VITE_ENVIRONMENT'] || 'production'}"
    timestamp ${Time.now.strftime('%Y-%m-%d %H:%M:%S')}
  </record>
</filter>

<match healthcare.nginx.**>
  @type file
  path /var/log/healthcare/processed
  append true
  time_slice_format %Y%m%d
  time_slice_wait 1m
  compress gzip
</match>